<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script type="text/javascript" src="../micello_nondyn.js"></script>
		<script type="text/javascript" src="../micello.js"></script>
		<script type="text/javascript" src="../mapstructconstants.js"></script>
		<script type="text/javascript" src="../zList.js"></script>
		<script type="text/javascript" src="../mapcontrol.js"></script>
		<script type="text/javascript" src="../mapgui.js"></script>
		<script type="text/javascript" src="../mapdata.js"></script>
		<script type="text/javascript" src="../mapcanvas.js"></script>
		<script type="text/javascript" src="../mapview.js"></script>
		<script type="text/javascript" src="../mappopup.js"></script>
		<script type="text/javascript" src="../mathutil.js"></script>
		<script type="text/javascript" src="../maprequestLocal.js"></script>
		<link rel="stylesheet" type="text/css" href="../micellomap.css">
		<script type="text/javascript">

			var mapControl;
			var mapData;

			function initialize() {
				micello.maps.key = "14e29464fe55199ad829";
				var mapLog = document.getElementById('mapLog');
				if(mapLog) {
					micello.logDiv = mapLog;
				}
				mapControl = new micello.maps.MapControl('mapElement');
				mapData = mapControl.data;

				mapData.loadCommunity(78);
			}

			function openCommunity() {



				//add a geometry overlay (add geometry to the map) - specify the paramters for the geometry.
					//an area object with a label
					var geomInfo1 = {
						//level
						"lid":232,
						//drawing style
						"t":"Room",
						//geometry
						"shp":[[0,1100.0,350.0],[1,1200.0,350.0],[1,1200.0,450.0],[1,1100.0,450.0],[4]],
						//text label
						"l":[1150.0,400.0,90,90,0],
						"lt":1,
						"lr":"Tent Sale!"
					};
					mapData.addGeometryOverlay(geomInfo1);
					//a line geometry, as opposed to area or linear area
					var geomInfo2 = {
						"lid":232,
						"t":"Route",
						"shp":[[0,1180,732],[1,1180,630],[1,1008,630],[1,1008,525]],
						//geometry type (area is default)
						"gt":1
					};
					mapData.addGeometryOverlay(geomInfo2);

					var theme = mapData.getTheme();
					var style;
					var x = 0;
					var y = 0;
					var ginf;
					for(style in theme.s) {
						ginf = {
							"lid":232,
							"t":style,
							"shp":[[0,x,y],[1,x+20,y],[1,x+20,y+20],[1,x,y+20],[4]],
							"l":[x+10,y+10,20,20,0],
							"lt":1,
							"lr":style
						};
						mapData.addGeometryOverlay(ginf);
						x += 25
					}
			}

		</script>
		<style type="text/css">
			html, body { height: 100%; width: 100%; margin: 0; overflow:hidden;}
			#mapElement {width:100%; height:100%;}
		</style>
	</head>
	<body onload="initialize()">
		<div id="mapHead"><input id ="textinput" type="text"/><button type="button" onclick="openCommunity()">Open</button></div>
		<div id="mapElement"></div>
	</body>
</html>
